define("socialTemplates",["handlebars"],function(a){return{facebookPost:function(c){var b=Handlebars.compile('<div class="element facebook-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-facebook-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},flickrPost:function(c){var b=Handlebars.compile('<div class="element flickr-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-flickr-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a><p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},googlePost:function(c){var b=Handlebars.compile('<div class="element google-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-google-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a><p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},instagramPost:function(c){var b=Handlebars.compile('<div class="element instagram-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-instagram-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a><p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},linkedInPost:function(c){var b=Handlebars.compile('<div class="element likedIn-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-likedIn-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a><p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},twitterPost:function(c){var b=Handlebars.compile('<div class="element twitter-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-twitter-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},vkontaktePost:function(c){var b=Handlebars.compile('<div class="element vkontakte-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-vkontakte-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},youTubePost:function(c){var b=Handlebars.compile('<div class="element youTube-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-youTube-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /><span class="poster-overlay"><span class="center-vertically"><i class="icon-play theme-link knockout-bgcolor"></i></span></span></a><p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{web_url}}" target="_blank"></a></div></div></div>');
return b(c)
},youKuPost:function(c){var b=Handlebars.compile('<div class="element youKu-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-youKu-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix"><a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /><span class="poster-overlay"><span class="center-vertically"><i class="icon-play theme-link knockout-bgcolor"></i></span></span></a><p class="post-title align-left">{{{post_title}}}</p><p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{web_url}}" target="_blank"></a></div></div></div>');
return b(c)
},sinaweiboPost:function(c){var b=Handlebars.compile('<div class="element sinaweibo-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-sinaweibo-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a>{{/if}}{{/if}}{{/if}}<p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},qzonePost:function(c){var b=Handlebars.compile('<div class="element qzone-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-qzone-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a>{{/if}}{{/if}}{{/if}}<p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
},wechatPost:function(c){var b=Handlebars.compile('<div class="element wechat-post"><div class="social-metadata clearfix">{{#if icon_image.desktop}}{{#if icon_image.tablet}}{{#if icon_image.mobile}}<img alt="{{{icon_image.altText}}}" src="{{{icon_image.desktop}}}" data-src=\'{"desktop":"{{{icon_image.desktop}}}", "tablet":"{{{icon_image.tablet}}}", "mobile":"{{{icon_image.mobile}}}"}\' />{{/if}}{{/if}}{{/if}}<a href="{{post_url}}" target="_blank"><i class="icon-wechat-sprite-small"></i>{{{user_name}}}</a><span class="post-date">{{{post_date}}}</span></div><div class="social-content clearfix">{{#if post_image.desktop}}{{#if post_image.tablet}}{{#if post_image.mobile}}<a class="post-img" href="{{post_url}}" target="_blank"><img alt="{{{post_image.altText}}}" src="{{{post_image.desktop}}}" data-src=\'{"desktop":"{{{post_image.desktop}}}", "tablet":"{{{post_image.tablet}}}", "mobile":"{{{post_image.mobile}}}"}\' /></a>{{/if}}{{/if}}{{/if}}<p class="post-text align-left">{{{post_text}}}</p><div class="align-right web-link"><a href="{{post_url}}" target="_blank"></a></div></div></div>');
return b(c)
}}
});
tccc.initComponent(".m-f-social-feed",["isotope","socialTemplates"],function(d,b,a,c){d.each(function(){var n=$(this),l=n.find(".feed-tab"),j=l.length>1,f=n.find(".tab-container"),o=n.find(".social-links li"),k=n.find(".social-page"),m=n.find(".social-container"),i=n.find("#load-more-button"),g=n.find("span.switch"),p={url:m.data("url"),offset:m.data("offset"),limit:m.data("limit"),brand_accound:"all",network:"all",lang:"all",loadMore:true};
var e=function(){m.imagesLoaded(function(){m.isotope({itemSelector:".element",animationEngine:"jquery",gutter:0})
})
};
var h=function(q){if(!q){m.isotope("remove",m.children(".element"));
m.isotope("reloadItems").isotope("reLayout")
}$.when($.getJSON(p.url+"/"+p.offset+"/"+p.limit+"/"+p.brand_accound+"/"+p.network+"/"+p.lang+".json")).done(function(v){var u=$([]),r,t;
p.loadMore=v.loadMore;
p.offset=v.next_offset;
p.limit=v.limit;
if(!v.load_more){i.addClass("hidden")
}else{i.removeClass("hidden")
}_.each(v.social_network_posts,function(x){if(x.social_network==="facebook-post"){r=$(c.facebookPost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="flickr-post"){r=$(c.flickrPost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="google-plus-post"){r=$(c.googlePost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="instagram-post"){r=$(c.instagramPost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="linked-in-post"){r=$(c.linkedInPost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="twitter-post"){r=$(c.twitterPost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="vkontakte-post"){r=$(c.vkontaktePost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="you-tube-video"){r=$(c.youTubePost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="you-ku-video"){r=$(c.youKuPost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="sinaweibo-post"){r=$(c.sinaweiboPost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="qzone-post"){r=$(c.qzonePost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}else{if(x.social_network==="wechat-post"){r=$(c.wechatPost(x));
t=r.find(".post-date");
t.text(m.data("posted-on")+" "+t.text());
r.find(".web-link a").text(m.data("view-on-web"));
u.push(r[0])
}}}}}}}}}}}}});
var s=5;
while(s>0){try{m.isotope("insert",u,function(){m.imagesLoaded(function(){m.isotope("reloadItems").isotope("reLayout")
})
});
break
}catch(w){s--;
continue
}}})
};
if(j){l.on("click","a",function(q){var r=$(this).closest("li.feed-tab");
q.preventDefault();
r.siblings().toggleClass("selected",false);
r.toggleClass("selected");
f.toggleClass("hidden",true);
f.filter("."+$(this).data("tab")).toggleClass("hidden");
if($(this).data("tab")==="social-tab"){m.isotope("reloadItems").isotope("reLayout");
b.global.fireRefreshEventOnWindow()
}})
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(b.global.sizes.current_size===b.global.sizes.MOBILE){o.removeClass("last");
o.filter(":odd").addClass("last")
}else{o.removeClass("last");
o.filter(":last").addClass("last");
o.filter(function(q){return q%6===0
}).addClass("last");
if(o.length>1){o.filter(":first").removeClass("last")
}}m.isotope("reloadItems").isotope("reLayout")
});
if(b.global.sizes.current_size===b.global.sizes.MOBILE){o.removeClass("last");
o.filter(":odd").addClass("last")
}o.on("click","a",function(q){q.preventDefault();
o.children("a").toggleClass("selected",false);
$(this).toggleClass("selected");
k.toggleClass("hidden",true).toggleClass("show",false);
k.filter("."+$(this).data("social-page")).toggleClass("hidden show");
p.offset=m.data("offset");
p.limit=m.data("limit");
p.network=$(this).data("network");
p.brand_accound=$(this).data("account-name");
h(false)
});
i.on("click",function(q){q.preventDefault();
h(true)
});
g.on("click",function(r){r.preventDefault();
var q=$(this).next()[0];
if(q.checked){$(this).find(".background").animate({left:"-56px"},200).text(q.getAttribute("data-label-country")).append('<img src="'+q.getAttribute("data-image-country")+'" alt="'+q.getAttribute("data-label-country")+'">');
p.lang=q.getAttribute("data-label-country")
}else{$(this).find(".background").animate({left:"0px"},200).text(q.getAttribute("data-label-all"));
p.lang="all"
}q.checked=!q.checked;
p.offset=m.data("offset");
h(false)
});
e();
h(false)
})
});
tccc.initComponent(".quiz-module",[],function(b,a){b.each(function(){var r=$(this),g=r.find(".cover-slide"),j=r.find(".questions-slide"),c=r.find(".results-slide"),t=g.find("h3.title"),I=g.find("p.description"),F=j.find("span.actual-question"),H=j.find("span.total-questions"),E=j.find("ul.questions-answers > li"),z=E.find("li.answer"),l=j.find("a.button-next"),f=1,q=E.length,s=0,o=$('<span class="messages correct-msg">'+j.data("correct-msg")+"</span>"),G=$('<span class="messages right-answer-msg">'+j.data("right-answer-msg")+"</span>"),n=$('<span class="messages incorrect-msg">'+j.data("incorrect-msg")+"</span>"),B=c.find(".links"),e=c.find("span.percentage"),v=r.find("li.current").parent().find(".wrapper-answer"),p=c.find("p.result-summary");
F.text(f);
H.text(q);
$(".button-text , .button-next , .button-result-link ").css("text-decoration","none");
$("li.answer a").css("text-decoration","none");
function i(){return j.find("a.button-next[data-status=ok]")
}function u(){return j.find("a.button-next[data-status=next]")
}function y(){return j.find("a.button-next[data-status=score]")
}function d(){a.util.truncate_text(t,3);
a.util.truncate_text(p,5);
a.util.truncate_text(z.find("span.option-item"),1)
}function h(){if(a.global.sizes.current_size===a.global.sizes.MOBILE){r.find(".question-mobile").append(v).show()
}}function w(){if((a.global.sizes.current_size===a.global.sizes.TABLET)&&($(".two-columns-quiz").length)){r.find(".question-mobile").append(v).show()
}}function A(){return Math.floor((s/q)*100)
}function m(){l.text().trim()
}function D(J){l.attr("data-status",J)
}g.on("click","a.button-text",function(J){J.preventDefault();
$(".errorMessageContainer").hide();
j.find(".question-mobile").html(j.find(".current .question").text());
g.addClass("hidden");
a.util.truncate_text(z.find("span.option-item"),1);
setTimeout(function(){j.slideDown("3000",function(){j.removeClass("hidden")
});
j.toggleClass("fade-in fade-out")
},1000)
});
E.on("click","li.answer a",function(J){J.preventDefault();
if(!$(this).parent("li.answer").hasClass("disabled")){$(this).parent("li.answer").toggleClass("selected",true).siblings().toggleClass("selected",false);
D("ok");
i().removeClass("disabled")
}else{return
}});
function x(){var K=$(E[f-1]).find("li.answer.selected"),J=$(E[f-1]).find('li.answer[data-answer="true"]:visible');
$(E[f-1]).find('li.answer[data-answer="false"]').hide();
$(E[f-1]).find("li.answer.selected").show();
if((K.data("answer"))){s++;
K.find("span.bullet").css("background-color","transparent").addClass("correct");
v.show().html(o);
r.find(".current .question").append(v);
h();
w()
}else{K.children().find("span.option-item").addClass("decoration");
K.find("span.bullet").css("background-color","transparent").addClass("incorrect");
J.insertAfter(K);
J.find("span.bullet").css("background","transparent").addClass("arrow");
v.show().html(n);
r.find(".current .question").append(v);
h();
w()
}m();
if($(E[f-1]).next().length){var L=l.data("text-swap");
l.text(L);
l.addClass("on");
l.addClass("disabled").css("background","#f40009");
D("next")
}else{var L=l.data("text-score");
l.text(L);
l.removeClass("on");
D("score")
}}function C(){v.hide();
j.show();
$(E[f-1]).addClass("hidden").removeClass("current");
$(E[f]).removeClass("hidden").addClass("current");
var J=$("figure.current");
J.addClass("hidden").removeClass("current");
J.next().removeClass("hidden").addClass("current");
a.util.truncate_text(z.find("span.option-item"),1);
f++;
F.text(f);
$(".question-mobile").html($(".current .question").text());
m();
l.css("background","");
l.text("Ok");
l.removeClass("on");
D("ok")
}function k(){$(p).each(function(){var K=$(this);
K.html(K.html().replace(/&amp;nbsp;/g,""));
K.html(K.html().replace(/<(\w+)[^>]*>.*<\/\1>/gm,""))
});
var J=A();
e.text(J+"%");
if(J<=25){B.filter(".result-0-25").removeClass("hidden")
}else{if(J<=50){B.filter(".result-26-50").removeClass("hidden")
}else{if(J<=75){B.filter(".result-51-75").removeClass("hidden")
}else{B.filter(".result-76-100").removeClass("hidden")
}}}j.addClass("hidden");
j.css("display","none");
c.removeClass("hidden");
c.toggleClass("fade-in fade-out")
}l.on("click",function(J){J.preventDefault();
if(l.attr("data-status")=="ok"&&!l.hasClass("disabled")){x()
}else{if(l.attr("data-status")=="next"){C()
}else{if(l.attr("data-status")=="score"){k()
}}}if(l.attr("data-status")=="ok"&&l.hasClass("disabled")){$(".errorMessageContainer").show
}});
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
d()
})
});
tccc.initComponent(".photo-text",[],function(b,a){b.each(function(){var e=$(this),c=e.find(".summary p");
function d(){a.util.truncate_text(c,5)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
d()
})
});
tccc.initComponent(".pdf-report",[],function(b,a){b.each(function(){var e=$(this),c=e.find(".report-group li span"),g=e.find(".report-group li"),f=e.find(".pdf-download input:submit");
function d(){a.util.truncate_text(c,3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
g.on("click","input:checkbox",function(h){if(g.find("input:checked").length>0){f.removeAttr("disabled").removeClass("disabled")
}else{f.attr("disabled","disabled").addClass("disabled")
}});
d()
})
});
tccc.initComponent(".oportunities-map",[],function(b,a){b.each(function(){var g=$(this),d="";
var f={region:g.find(".region a"),overlay:g.find(".overlay")};
function c(i){d=i.data("region-name");
f.overlay.fadeIn(300);
f.overlay.toggleClass(d)
}function e(){f.overlay.hide();
f.overlay.toggleClass(d)
}function h(){f.region.off();
if(a.global.sizes.current_size===a.global.sizes.MOBILE||a.global.sizes.current_size===a.global.sizes.TABLET){f.region.on("click",function(j){j.preventDefault();
var i=$(this).attr("href");
c($(this));
setTimeout(function(){window.location.href=i
},1000)
})
}else{f.region.on("mouseover",function(){c($(this))
}).on("mouseleave",function(){e()
})
}}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){h()
});
h()
})
});
tccc.initComponent(".map-2x1",["handlebars"],function(b,a,c){b.each(function(){var v=$(this),m=document.getElementById("map-container"),y=v.find("h2"),n=v.find("#map-list-items-container"),x=b.data("google-maps-api-key"),q=b.data("markers-url"),l=b.data("default-zoom"),u=b.data("default-latitude"),t=b.data("default-longitude"),k,p={},d={},w;
function s(){var z=document.createElement("script");
z.type="text/javascript";
z.src="https://maps.googleapis.com/maps/api/js?key="+x+"&sensor=false&callback=window.loadInfobox";
document.body.appendChild(z)
}window.loadInfobox=function(){Modernizr.load([{load:"/etc/designs/journey/libs/js/infobox.min.js",complete:function(){h()
}}])
};
function h(){var z={center:new google.maps.LatLng(u,t),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:l};
w=new google.maps.Map(m,z);
g()
}function g(){$.getJSON(q).done(function(z){f(z);
j();
o()
})
}function f(z){$.each(z,function(G,F){var C=new google.maps.LatLng(F.latitude,F.longitude),H=new google.maps.Marker({position:C,map:w,title:F.name,shortDescription:F.shortDescription,longDescription:F.longDescription,thumbnail:F.imageUrl,address:F.address,phone:F.phone,url:F.url,linkText:F.linkText?F.linkText:"Website"}),D=H.thumbnail?'<img src="{{thumbnail}}" title="{{title}}" class="thumbnail"/>':"",I=H.url?'<a href="{{url}}" class="url theme-color-secondary" title="{{title}}" target="_blank">{{linkText}}</a>':"",J='<div class="details">'+D+'<div class="meta"><span class="title theme-color-secondary">{{title}}</span><span class="address">{{address}}</span><span class="phone">{{phone}}</span>'+I+'</div></div><p class="description theme-font-secondary">{{longDescription}}</p>',A=c.compile(J),E=A(H),B=new InfoBox({content:E,boxClass:"infobox"});
p[H.title]=H;
d[H.title]=B;
r(H)
})
}function r(z){var D=z.thumbnail?'<img src="{{thumbnail}}" class="thumbnail"/>':"",C='<div class="list-item" data-id="'+z.title+'">'+D+'<div class="meta"><span class="title theme-color-secondary">{{title}}</span><span class="description">{{shortDescription}}</span></div></div>',B=c.compile(C),A=B(z);
n.append(A)
}function j(){k=v.find(".list-item");
k.each(function(){var z=$(this);
z.on("click",function(){k.removeClass("active");
z.addClass("active")
});
google.maps.event.addDomListener(z[0],"click",function(){var A=z.data("id");
i(A)
})
})
}function o(){$.each(p,function(A,z){google.maps.event.addListener(z,"click",function(){var B=z.title;
i(B);
k.removeClass("active");
v.find('.list-item[data-id="'+B+'"]').addClass("active")
})
})
}function i(A){var z=p[A];
$.each(d,function(C,B){B.close()
});
d[A].open(w,z)
}function e(){a.util.truncate_text(y,1)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){e()
});
e();
s()
})
});
tccc.initComponent(".liveFyreMediaWallcontainer",[],function(b,a){b.each(function(){var i=$(this),g,f,c,h,e=i.find("#mediaWallSectionTitle h4 span");
var d=i.find("#wall").attr("data-livefyreMediaWallBean");
d=d.replace(/'/g,'"');
d=JSON.parse(d);
f=d.articleID;
h=d.network;
c=d.siteId;
if(d.modalBehavior){g=true
}else{g=false
}Livefyre.require(["streamhub-wall#3"],function(k){var j=window.wall=new k({el:document.getElementById("wall"),initial:d.intialItems,modal:g,showMore:10,bodyLineHeight:1.5,bodyFontSize:"medium",linkColor:"#f40009",displayNameColor:"#f40009",fontFamily:"proxima-nova, sans-serif",collection:{network:h,siteId:c,articleId:f}})
});
e.text(d.longTitle);
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(j,k){if(k.current_size===a.global.sizes.MOBILE){e.text(d.shortTitle)
}else{e.text(d.longTitle)
}})
})
});
tccc.initComponent(".list-of-lists",["selectBoxIt"],function(c,b,a){c.each(function(){var g=$(this),e=g.find("#filter-by-category"),f=g.find("#lists-container");
e.selectBoxIt(b.global.selectBoxItOptions);
e.on("change",function(){var h=$(this).find("option:selected").val();
f.find("ul").addClass("hidden");
f.find("#"+h).removeClass("hidden");
d()
});
function d(){b.util.truncate_text(".list-of-lists h3",1);
b.util.truncate_text(".list-of-lists .title-meta",1);
b.util.truncate_text(".list-of-lists .description",2)
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){d()
});
d()
})
});
tccc.initComponent(".list-view",["listContentHandler"],function(c,a,b){c.each(function(){var e={dom_pointers:{post_template:$(".library-list-template"),load_more_button:$("#load-more-button")},offset:c.data("offset"),limit:c.data("limit"),section:c.data("section"),section_path:c.data("section-path"),all_content:c.data("content-type"),byline_label:c.data("byline-label"),topic:c.data("topic"),tag:c.data("tag"),date:c.data("date"),list_type:"list",base_search_uri:c.data("base-url")},d=$("html"),f=new b();
f.init(e.dom_pointers,e.offset,e.limit,e.section,e.section_path,e.topic,e.tag,e.date,e.list_type,e.base_search_uri,e.all_content,e.byline_label,undefined);
a.util.truncate_text("h2 > a",4);
if(d.hasClass("desktop")||d.hasClass("big_desktop")){a.util.truncate_text(".summary",5)
}else{if(d.hasClass("tablet")){a.util.truncate_text(".summary",7)
}else{if(d.hasClass("mobile")){a.util.truncate_text(".summary",10)
}}}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(g,h){a.util.truncate_text("h2 > a",4);
if(h.current_size===a.global.sizes.DESKTOP||h.current_size===a.global.sizes.BIG_DESKTOP){a.util.truncate_text(".summary",5)
}else{if(h.current_size===a.global.sizes.TABLET){a.util.truncate_text(".summary",7)
}else{if(h.current_size===a.global.sizes.MOBILE){a.util.truncate_text(".summary",10)
}}}})
})
});
tccc.initComponent(".image-grid",["listContentHandler"],function(c,a,b){c.each(function(){var e={dom_pointers:{post_template:$(".library-grid-template"),load_more_button:$("#load-more-button")},section:c.data("section"),section_path:c.data("section-path"),topic:c.data("topic"),tag:c.data("tag"),date:c.data("date"),limit:c.data("limit"),offset:c.data("offset"),list_type:"grid",base_search_uri:c.data("base-url"),download_label:c.data("download-label")},d=$("html"),g=new b();
g.init(e.dom_pointers,e.offset,e.limit,e.section,e.section_path,e.topic,e.tag,e.date,e.list_type,e.base_search_uri,undefined,undefined,e.download_label);
if(d.hasClass("mobile")){a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",2)
}else{a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",3)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(h,i){if(i.current_size===a.global.sizes.MOBILE){a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",2)
}else{a.util.truncate_text(".meta h2",2);
a.util.truncate_text(".meta p",3)
}});
if(d.hasClass("lt-ie9")){var f=c.find(".post-container > article");
$.each(f,function(h,j){var i=h+1;
if(i%3===0){$(this).addClass("multiple-of-three")
}})
}})
});
tccc.initComponent(".lead-media",["jqUI"],function(b,a){b.each(function(){var n=$(this),g=(n.find(".item").length>1),i=n.find(".royalSlider"),m=n.find(".media-container"),q=m.find(".item"),l=m.find(".show-media-caption"),r=m.find(".overlay-left-ie8"),k=m.find(".overlay-right-ie8"),c=$(".article-content"),d,p,f;
if(c.find(".media-data-attributes").data("hide-credit")){c.find(".media-data-attributes").addClass("hidden")
}else{$(".lead-media").find(".media-data-attributes").attr("style","display:block !important")
}function o(){f=f?f:n.find(".rsArrow")
}function h(s){s.off();
s.on("click",function(t){if(d){return false
}else{return true
}})
}function e(t,s,v){if(t&&t.length>1){var u=n.find(".credit-url");
n.find(".media-credit").removeClass("hidden");
n.find(".media-credit span").text(t);
if(!s){u.removeAttr("href");
u.addClass("no-link");
d=true
}else{u.attr("href",s);
u.attr("target",v);
u.removeClass("no-link");
d=false
}h(u)
}else{n.find(".media-credit").addClass("hidden")
}}function j(s){if(s&&s.length>1){l.removeClass("hidden")
}else{l.addClass("hidden")
}}if(a.global.sizes.current_size!==a.global.sizes.MOBILE){e(q.data("credit"),q.data("credit-url"),q.data("credit-open-in-new-window"))
}else{e(q.data("credit-mobile"),q.data("credit-url"),q.data("credit-open-in-new-window"))
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(s,t){if(t.current_size===a.global.sizes.MOBILE){e(q.data("credit-mobile"),q.data("credit-url"),q.data("credit-open-in-new-window"))
}else{e(q.data("credit"),q.data("credit-url"),q.data("credit-open-in-new-window"))
}});
j($.trim(q.first().find(".media-caption").text()));
if(g){m=i.royalSlider({keyboardNavEnabled:true,arrowsNav:true,controlNavigation:"none",loop:true,arrowsNavAutoHide:false,autoScaleSlider:true,autoScaleSliderWidth:596,autoScaleSliderHeight:334,imageScalePadding:0}).data("royalSlider");
m.ev.on("rsAfterSlideChange",function(){o();
p=m.currSlide;
j($.trim(p.holder.find(".media-caption").text()));
e(p.holder.find(".item").data("credit"),p.holder.find(".item").data("credit-url"),p.holder.find(".item").data("credit-open-in-new-window"));
if(p.holder.find(".media-caption").hasClass("hidden")){l.text($(".media-container").data("view-caption-label"));
f.show()
}else{l.text($(".media-container").data("hide-caption-label"));
if(p.holder.find(".media-caption").length!==0){f.hide()
}}});
l.on("click",function(t){o();
t.preventDefault();
p=m.currSlide;
var v=$(this),s=$.trim(v.text()),u=$(".media-container"),w=p.holder.find(".media-caption");
w.animate({color:"#333"},"slow");
if(w.hasClass("hidden")){f.hide()
}w.toggleClass("hidden",600,"linear").promise().done(function(){if(!w.hasClass("hidden")){$(this).animate({color:"#fff"},"slow")
}else{f.show()
}v.text(s===u.data("view-caption-label")?u.data("hide-caption-label"):u.data("view-caption-label"))
})
});
$(".rsArrowIcn").hover(function(){q.addClass("opacity-hover");
r.addClass("opacity-hover");
k.addClass("opacity-hover")
},function(){q.removeClass("opacity-hover");
r.removeClass("opacity-hover");
k.removeClass("opacity-hover")
})
}else{l.on("click",function(t){o();
t.preventDefault();
var v=$(this),s=$.trim(v.text()),u=$(".media-container"),w=q.find(".media-caption").first();
w.animate({color:"#333"},"slow");
if(w.hasClass("hidden")){f.hide()
}w.toggleClass("hidden",600,"linear").promise().done(function(){if(!w.hasClass("hidden")){$(this).animate({color:"#fff"},"slow")
}else{f.show()
}v.text(s===u.data("view-caption-label")?u.data("hide-caption-label"):u.data("view-caption-label"))
})
})
}})
});
tccc.initComponent(".lead-image-slideshow",[""],function(b,a){b.each(function(){var e=($(".lead-carousel").find(".item").length>1),h=$(".media-container"),d=h.find(".item"),g=$(this).find(".royalSlider"),c=h.find(".overlay-left-ie8"),f=h.find(".overlay-right-ie8");
if(e){h=g.royalSlider({keyboardNavEnabled:true,arrowsNav:true,controlNavigation:"none",loop:true,autoPlay:{enabled:true,pauseOnHover:true},arrowsNavAutoHide:false,autoScaleSlider:true,autoScaleSliderWidth:596,autoScaleSliderHeight:334,imageScalePadding:0}).data("royalSlider");
$(".rsArrowIcn").hover(function(){d.addClass("opacity-hover");
c.addClass("opacity-hover");
f.addClass("opacity-hover")
},function(){d.removeClass("opacity-hover");
c.removeClass("opacity-hover");
f.removeClass("opacity-hover")
})
}})
});
tccc.initComponent(".cloud-list-view",["aws-sdk-2.187.0.min","moment"],function(c,a,b){c.each(function(am,ae){var o=$(ae),al,aq,f,l=10,O=10,X=0,q=20,E,d,J,an,N,ad,Q,ai,y,ak,ao,M,n,aa=[],W=false,au,T,ar,R=false,D=false,g=true,ah,U=false,t=[],u="",P=0,x,m,af,Z,B,ac,at,p,S,ap,j,s,i,A,z,ab,aj,Y,ag,H=[],h="",V,F,e,r;
$(document).ready(function(){var k=$(".cloud-list-view").attr("data-cloudSearchBean");
var ay=$("#filterSearch").attr("data-filter-json");
F=$("body").attr("data-lambda-endpoint-cloudsearchrecords");
if(k){k=JSON.parse(k);
al=k.endPoint;
aq=k.awsVersion;
E=k.language;
d=k.country;
J=d+"_"+E;
Q=k.isAuthorMode;
pagePathSection=k.sectionPath;
ai=k.readmoreLinkLabel;
byLineLabel=k.byLineLabel;
ao=k.isTagTemplate;
y=k.currentPageName;
l=k.moreLoadCount;
O=k.initialLoadCount;
ak=k.showLeadImage;
M=k.sectionPath;
V=k.displayAllContent
}if(typeof(Storage)!=="undefined"){localStorage.setItem("displayAllContent",V);
localStorage.setItem("sectionPath",M)
}if(ay){ay=JSON.parse(ay);
x=ay.defaultYear;
m=ay.defaultMonth;
af=ay.displayStartingFrom;
Z=ay.displayTopicTagFilter;
B=ay.filterButtonLabel;
ac=ay.dateFilterLabel;
at=ay.topicTagFilterButtonLabel;
p=ay.topicTagFilterLabel;
S=ay.selectTopicTagFilterLabel;
ap=ay.componentFilterTitle;
j=ay.doNotIncludeTopics;
s=ay.doNotIncludeTags;
i=ay.defaultTopics;
A=ay.defaultTags;
z=ay.selectedTopics;
ab=ay.selectedTags;
aj=false;
Y=false
}$(window).scroll(function(){sessionStorage.scrollPos=$(window).scrollTop()
});
var aB=function(){$(window).scrollTop(sessionStorage.scrollPos||0)
};
window.onload=aB;
if(!ap&&!af&&!Z){$("#filterWrapper").hide()
}function aA(){var aD;
if(!U){au=(parseInt(m,10)-1).tcccPad(2);
T=x
}if(T&&au){if(U){au=(parseInt(au,10)-1).tcccPad(2);
aD=moment(new Date(T,au,1))
}else{aD=moment(new Date(T,au,new Date().getDate()))
}}if(au&&!T){var aF=new Date().getFullYear();
if(U){aD=moment(new Date(T,au,1))
}else{aD=moment(new Date(T,au,new Date().getDate()))
}}if(!au&&T){var aC=new Date().getMonth();
aC=(parseInt(aC,10)+1).tcccPad(2);
if(U){aD=moment(new Date(T,au,1))
}else{aD=moment(new Date(T,au,new Date().getDate()))
}}if(!au&&!T){var aF=new Date().getFullYear();
var aC=new Date().getMonth();
aC=(parseInt(aC,10)+1).tcccPad(2);
if(U){aD=moment(new Date(T,au,1))
}else{aD=moment(new Date(T,au,new Date().getDate()))
}}if(!ao){if(!U){var aE=aD.add(1,"d");
ah=aE.toDate().toISOString()
}else{ah=aD.toDate().toISOString()
}}}if(m&&m.toUpperCase()==="CURRENT"){m=new Date().getMonth();
m=parseInt(m,10)+1
}$("#month").val(m);
if(x&&x.toUpperCase()==="CURRENT"){x=new Date().getFullYear()
}$("#year").val(x);
au=m;
T=x;
aA();
if(z&&z.length>0){R=true
}if(ab&&ab.length>0){D=true
}if(M){h=M.substr(M.lastIndexOf("/")+1);
n=M.substr(0,M.lastIndexOf("/"));
n=n.substr(n.lastIndexOf("/")+1)
}if(i&&i.length>0){aj=true
}if(A&&A.length>0){Y=true
}if(ao&&ao){f={query:y,queryParser:"structured",filterQuery:"(and (or site:'"+J+"' (phrase field=override_video_info'"+J+"')) (or (phrase field=cq_template'article') (phrase field=cq_template'recipe'))(phrase field=tags_and_topics_details'"+y+"') )",start:X,size:O,sort:"cq_last_published_date desc"}
}if(M&&!ao&&!aj&&!Y){if(V){f={query:J,queryParser:"structured",filterQuery:"(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+M+"') (phrase field=path'dam') (phrase field=is_downloadable'true') ) ( range field=cq_last_published_date  {,'"+ah+"'])))",start:X,size:q,sort:"cq_last_published_date desc"}
}else{f={query:J,queryParser:"structured",filterQuery:"(and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=cq_template'article') (phrase field=cq_template'recipe'))(phrase field=path'"+M+"')( range field=cq_last_published_date  {,'"+ah+"']) )",start:X,size:q,sort:"cq_last_published_date desc"}
}}if(M&&!ao&&(aj||Y)){t=i.concat(A);
K(t);
if(t.length>0){if(t.length==1){u="(phrase field=tags_and_topics_details'"+e[0]+"'))"
}else{u=u+"(and ";
e.forEach(function(aC){u=u+"(phrase field=tags_and_topics_details'"+aC+"')"
});
u=u+") ( range field=cq_last_published_date  {,'"+ah+"']))"
}}if(V){var az="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+M+"') (phrase field=path'dam') (phrase field=is_downloadable'true'))) ( range field=cq_last_published_date  {,'"+ah+"'])"+u;
f={query:J,queryParser:"structured",filterQuery:az,start:X,size:q,sort:"cq_last_published_date desc"}
}else{var az="(and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+M+"')  )"+u;
f={query:J,queryParser:"structured",filterQuery:az,start:X,size:q,sort:"cq_last_published_date desc"}
}}f["return"]="vanity_url,path,override_video_info,long_title,resize_image_url,tags_and_topics_details,formatted_publish_date,author,simple_title,article_body,alt,content_type,cq_last_published_date";
AWS.config.region=k.awsRegion;
csd=new AWS.CloudSearchDomain({endpoint:al,apiVersion:aq,convertResponseTypes:false});
w(f);
function ax(aC){updatedTagTopicList=[];
if(R&&!D){$.each(aC,function(aE,aF){var aD=aF.tagType;
if(aD=="Tag"){updatedTagTopicList.push(aF)
}})
}return updatedTagTopicList
}$("#filterTitle").text(ap);
$("#filterToggle #filterToggleButton").text(B);
$("#dateFilterTitle").text(ac);
$("#addFilterLabel").text(at);
$("#filterByLable").text(p);
if(!(af)){m=new Date().getMonth();
m=parseInt(m,10)+1;
x=new Date().getFullYear();
$("#dateFilterWrapper").hide()
}else{$("#dateFilterWrapper").show()
}if(!(af)){$("#dateFilterWrapper").hide()
}else{$("#dateFilterWrapper").show()
}if(!(Z)){$("#bottomFilter").hide()
}else{$("#bottomFilter").show()
}$("#toggleFilterContainer").click(function(){$(this).hide();
$("#selectTopic").show()
});
$("#month").on("change",function(){W=true;
U=true;
au=$("#month option:selected").val();
aA();
L()
});
$("#year").on("change",function(){W=true;
U=true;
T=$("#year option:selected").val();
aA();
L()
});
$("#filterToggleButton").on("click",function(aC){$("#bottomFilter").slideToggle("slow");
$(this).toggleClass("buttonExpanded")
});
$("body").on("click",".removeItemLink",function(aC){aC.preventDefault();
var aD=$(this).prev().text();
aa=$.grep(aa,function(aF,aE){return aF.tagTopicName==aD
},true);
$(this).closest("li").fadeOut("normal",function(){$(this).remove()
});
av("tagsTopics");
L()
});
$("#selectTopic").change(function(){var aD=$("#selectTopic option:selected").text();
var aC=$(this).val();
v(aD,aC)
});
function v(aC,aE){var aD=aE.split(",");
aa.push({tagTopicName:aC,color:aD[1],path:aD[0]});
av("tagsTopics");
aw()
}function av(aC){if(!String.prototype.contains){String.prototype.contains=function(aF){return this.indexOf(aF)>-1
}
}if(aC=="tagsTopics"){var aD=_.pluck(aa,"tagTopicName").join(",");
var aE;
aE=window.location.href.split("?")[0];
aE=aE+"?tagstopics="+aD;
history.pushState({},null,aE)
}}function aw(){$(".selectedTags").remove();
if(aa&&aa.length>0){var aD="";
var aC=aa;
aD=aD+'<div class="tags selectedTags"><ul class="topicListWrapper">';
aC.forEach(function(aE){aD=aD+'<li style="color:'+aE.color+';border:1px solid;background:#FFFFFF"><a class="selectedItem" href="'+aE.path+'" style="color:'+aE.color+';background:#FFFFFF">'+aE.tagTopicName+'</a><a href="" class="removeItemLink"><span>&nbsp;</span><i class="fa fa-times-circle" aria-hidden="true"></i></a></li>'
});
aD=aD+"</ul></div>";
$("#addFilterWrapper").before(aD)
}L()
}});
function L(){if(t&&t.length>0){var av;
if(aa&&aa.length==0){if(t.length==1){K(t);
if(V){av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+n+"') (phrase field=path'dam') (phrase field=is_downloadable'true') ) ( range field=cq_last_published_date  ['"+ah+"',}) (phrase field=tags_and_topics_details'"+e[0]+"')))"
}else{av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+n+"')  ) ( range field=cq_last_published_date  ['"+ah+"',}) (phrase field=tags_and_topics_details'"+e[0]+"')))"
}}else{if(V){av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+n+"') (phrase field=path'dam') (phrase field=is_downloadable'true')))( range field=cq_last_published_date  ['"+ah+"',}) "+u+"))"
}else{av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+n+"')  ) ( range field=cq_last_published_date  ['"+ah+"',})"+u+")))"
}}f={query:J,queryParser:"structured",filterQuery:av,start:X,size:q,sort:"cq_last_published_date asc"}
}if(aa&&aa.length>0){var k=_.pluck(aa,"tagTopicName");
var ay=k.concat(t);
ay=ay.concat(t);
K(ay);
var aw="";
aw=aw+"(and ";
e.forEach(function(az){aw=aw+"(phrase field=tags_and_topics_details'"+az+"')"
});
aw=aw+") ( range field=cq_last_published_date  {,'"+ah+"'])";
if(V){av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+n+"') (phrase field=path'dam') (phrase field=is_downloadable'true') )"+aw+")"
}else{av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+n+"')  )"+aw+")"
}f={query:J,queryParser:"structured",filterQuery:av,start:X,size:q,sort:"cq_last_published_date asc"}
}}if(t&&t.length==0){var av;
var ax=_.pluck(aa,"tagTopicName");
K(ax);
if(aa&&aa.length==1){if(V){av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+n+"') (phrase field=path'dam') (phrase field=is_downloadable'true') ) ( range field=cq_last_published_date  ['"+ah+"',}) (phrase field=tags_and_topics_details'"+e+"')))"
}else{av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+n+"')  ) ( range field=cq_last_published_date  ['"+ah+"',}) (phrase field=tags_and_topics_details'"+e+"')))"
}}if(aa&&aa.length>1){var v="";
v=v+"(and ";
e.forEach(function(az){v=v+"(phrase field=tags_and_topics_details'"+e+"')"
});
if(V){av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=content_type'image') (phrase field=content_type'video')) (or (phrase field=path'"+n+"') (phrase field=path'dam') (phrase field=is_downloadable'true') )( range field=cq_last_published_date  ['"+ah+"',}) "+v+")))"
}else{av="(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"'))(or (phrase field=content_type'article') (phrase field=cq_template'recipe'))  (or (phrase field=path'"+n+"')  ) ( range field=cq_last_published_date  ['"+ah+"',})"+v+")))"
}}f={query:J,queryParser:"structured",filterQuery:av,start:X,size:q,sort:"cq_last_published_date asc"}
}if((aa&&aa.length==0&&t&&t.length==0&&af)||((!(Z))&&af)){f={query:J,queryParser:"structured",filterQuery:"(and is_black_listed:'false' (and (or site:'"+J+"' (phrase field=override_video_info'"+J+"')) (or (phrase field=cq_template'article') (phrase field=cq_template'recipe')) (phrase field=path'"+h+"') ( range field=cq_last_published_date  ['"+ah+"',})))",start:X,size:O,sort:"cq_last_published_date asc"}
}w(f)
}$(".cloud-list-view").find("#load-more-button").click(function(){g=false;
G()
});
function G(){if(X===0){X=q
}else{X=parseInt(X,10)+parseInt(l,10)
}f.start=X;
f.size=l;
w(f)
}function w(av){var k,v={query:av.filterQuery,parser:av.queryParser,"return":av["return"],start:av.start,size:av.size,sort:av.sort};
$.ajax({type:"POST",url:F,data:JSON.stringify(v),dataType:"json"}).done(function(ax,ay,aw){JSON.stringify(ax);
console.log("response results",ax);
k=ax.hits.hit;
$(".button-container").show();
if(k.length<l){$(".button-container").hide()
}if(k.length>0){if(g){P=0;
$(".post-container article").remove()
}$.each(k,function(aL){var aF=k[aL].fields,aP=aF.vanity_url,aH=aF.path,aI,az,aK="";
P++;
if(aF.tags_and_topics_details){aI=JSON.parse(aF.tags_and_topics_details)
}var aE="";
if(aF.long_title){aE=aF.long_title;
if(aE){var aJ='<span class="theme-secondary">';
var aM="</span>";
aE=aE.replace("{",aJ);
aE=aE.replace("}",aM)
}}var aC=aA(Q,aP,aH);
function aA(aV,aS,aU){var aT;
if(aV){aT=aU+".html"
}else{aT=aS
}if(aF.content_type==="image"){if(aP){aT=aP
}else{aT=aH
}}return aT
}if(ak){if(aF.resize_image_url){az=true
}else{az=false
}}else{az=false
}var aR=moment(aF.formatted_publish_date).format(a.global.get_date_format());
var aG;
var aD="";
var aN=$("footer").data("search-url");
aN+="?q="+aF.author;
if(typeof aF.author!=="undefined"){aD="<span id='fromText'>"+byLineLabel+"</span> <span itemprop='author' class='theme-secondary-link author_name'><a href='"+aN+"' data-status='NOTUPDATED' data-author-name='"+aF.author.replace(/'/g,"")+"'>"+aF.author+"</a></span> <span id='seperator'> | </span> "
}if(ao){if(az&&aF.content_type=="article"){aG="<article class='"+P+"' style='float: left;'><h2><a href='"+aC+"'><span itemprop='name' class='titles_updated'>"+aE+"</span></a></h2><div class='info'>"+aD+"<span itemprop='datePublished'>"+aF.formatted_publish_date+"</span></div><a class='entry-image' href='"+aC+"'><div class='img-container'><img alt='"+aF.alt+"' title='"+aF.simple_title+"' class='listItemImage' src='"+aF.resize_image_url+"'></div></a>";
if(aF.article_body){aG+="<p class='summary theme-font-secondary' style='display: inline; line-height: 25px;'>"+aF.article_body+"</p>"
}aG+="<a href='"+aC+"' class='read-more theme-color-secondary'>"+ai+"</a></article>";
$(".post-container").append(aG)
}else{if((!(ak)&&aF.content_type=="article")||(!az)){aG="<article class='"+P+"' style='float: left;'><h2><a href='"+aC+"'><span itemprop='name' class='titles_updated'>"+aE+"</span></a></h2><div class='info'>"+aD+"<span itemprop='datePublished'>"+aF.formatted_publish_date+"</span></div>";
if(aF.article_body){aG+="<p class='summary theme-font-secondary' style='display: inline; line-height: 25px;'>"+aF.article_body+"</p>"
}aG+="<a href='"+aC+"' class='read-more theme-color-secondary'>"+ai+"</a></article>";
$(".post-container").append(aG)
}else{if(aF.content_type=="video"||aF.content_type=="image"){aG="<article class='"+P+"' style='float: left;'><h2><a href='"+aC+"'><span itemprop='name' class='titles_updated'>"+aE+"</span></a></h2><div class='info'><span itemprop='author' class='theme-secondary-link'><a href=''>"+aF.content_type+"</a></span> | <span itemprop='datePublished'>"+aF.formatted_publish_date+"</span></div><a class='entry-image' href='"+aC+"'><div class='img-container'><img alt='"+aF.alt+"' title='"+aF.simple_title+"' class='listItemImage' src='"+aF.resize_image_url+"'></div></a></article>";
$(".post-container").append(aG)
}}}}if(!ao){var aQ=aH.split("/");
var aB=aQ.includes(h);
if(aQ.includes(h)){if(az&&aF.content_type=="article"){aG="<article class='"+P+"' style='float: left;'><h2><a href='"+aC+"'><span itemprop='name' class='titles_updated'>"+aE+"</span></a></h2><div class='info'>"+aD+"<span itemprop='datePublished'>"+aF.formatted_publish_date+"</span></div><a class='entry-image' href='"+aC+"'><div class='img-container'><img alt='"+aF.alt+"' title='"+aF.simple_title+"' class='listItemImage' src='"+aF.resize_image_url+"'></div></a>";
if(aF.article_body){aG+="<p class='summary theme-font-secondary' style='display: inline; line-height: 25px;'>"+aF.article_body+"</p>"
}aG+="<a href='"+aC+"' class='read-more theme-color-secondary'>"+ai+"</a></article>";
$(".post-container").append(aG)
}else{if(!(az)&&aF.content_type=="article"){aG="<article class='"+P+"' style='float: left;'><h2><a href='"+aC+"'><span itemprop='name' class='titles_updated'>"+aE+"</span></a></h2><div class='info'>"+aD+"<span itemprop='datePublished'>"+aF.formatted_publish_date+"</span></div>";
if(aF.article_body){aG+="<p class='summary theme-font-secondary' style='display: inline; line-height: 25px;'>"+aF.article_body+"</p>"
}aG+="<a href='"+aC+"' class='read-more theme-color-secondary'>"+ai+"</a></article>";
$(".post-container").append(aG)
}else{if(aF.content_type=="video"||aF.content_type=="image"){aG="<article class='"+P+"' style='float: left;'><h2><a href='"+aC+"'><span itemprop='name' class='titles_updated'>"+aE+"</span></a></h2><div class='info'><span itemprop='author' class='theme-secondary-link'><a href=''>"+aF.content_type+"</a></span> | <span itemprop='datePublished'>"+aF.formatted_publish_date+"</span></div><a class='entry-image' href='"+aC+"'><div class='img-container'><img alt='"+aF.alt+"' title='"+aF.simple_title+"' class='listItemImage' src='"+aF.resize_image_url+"'></div></a></article>";
$(".post-container").append(aG)
}}}}}if(aI&&aI.length>0){aK="";
aK=aK+'<div class="tags"><ul class="topicListWrapper">';
var aO=aI;
aO.forEach(function(aS){var aT=(aS.tagName).split("+").join(" ");
aT=aU(aT);
function aU(aV){return decodeURIComponent(aV)
}aK=aK+'<li><a href="'+aS.tagPath+'" style="color:'+aS.color+";border:1px solid "+aS.color+';background:#FFFFFF">'+aT+"</a></li>"
});
aK=aK+"</ul></div>";
$(".post-container article").each(function(aS){if(($(this).hasClass(P))){$(this).find(".info").after(aK);
if(!(aF.author)){$(this).find("#seperator").hide();
$(this).find("#fromText").hide();
$(this).find(".author_name").hide()
}}})
}a.util.truncate_text($("article .summary"),5)
});
C()
}})
}function K(k){e=k.map(function(av,v,aw){return encodeURIComponent(av)
})
}function C(){var k="/bin/journey/GetAuthorProfileServlet";
var v=[];
$(".author_name a[data-status='NOTUPDATED']").each(function(ax,aw){var av=$(aw).text();
v.push(av)
});
v=_.uniq(v);
_.each(v,function(av){$.ajax({type:"GET",url:"/bin/journey/GetAuthorProfileServlet",datatype:"html",data:{authorProfile:av,locale:J}}).done(function(ax,aA,aw){var az=aw.status;
if(az===200){if(ax&&ax.authorProfilePath){var ay=ax.authorProfilePath;
if(ay.length>0){var aB=$(".author_name a[data-status='NOTUPDATED'][data-author-name='"+av+"']");
aB.attr("href",ay).data("status","UPDATED")
}}}})
})
}if($(".tag-template").length>0){$(".post-container article").css("float","left")
}else{$(".post-container article").css("float","none")
}a.util.truncate_text("h2 > a",4);
var I=$("html");
if(I.hasClass("desktop")||I.hasClass("big_desktop")){a.util.truncate_text(".summary",5);
a.util.truncate_text(".summary-with-image",7)
}else{if(I.hasClass("tablet")){a.util.truncate_text(".summary",6);
a.util.truncate_text(".summary-with-image",4)
}else{if(I.hasClass("mobile")){a.util.truncate_text(".summary",9);
a.util.truncate_text(".summary-with-image",9)
}}}$(".cloud-list-view article .summary").css("display","inline");
$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(k,v){a.util.truncate_text("h2 > a",4);
o.find("article .summary").each(function(ax,aw){var av=$(aw);
av.text(av.data("original-text"))
});
if(v.current_size===a.global.sizes.DESKTOP||v.current_size===a.global.sizes.BIG_DESKTOP){a.util.truncate_text(".summary",5);
a.util.truncate_text(".summary-with-image",7)
}else{if(v.current_size===a.global.sizes.TABLET){a.util.truncate_text(".summary",6);
a.util.truncate_text(".summary-with-image",4)
}else{if(v.current_size===a.global.sizes.MOBILE){a.util.truncate_text(".summary",9);
a.util.truncate_text(".summary-with-image",9)
}}}$(".cloud-list-view article .summary").css("display","inline")
})
})
});
tccc.initComponent(".cloud-image-grid",["aws-sdk-2.187.0.min","moment","handlebars"],function(c,a,b){c.each(function(){var F,h,B,z,A,r=0,i,v,o,s,e,u,y,k,g,d,m,C,l,p,w,E,n=false,D,j=$(".cloud-image-grid").find("#load-more-button");
$(document).ready(function(){var G=$(".cloud-image-grid").attr("data-cloudSearchBean");
if(G){G=JSON.parse(G);
F=G.endPoint;
h=G.awsVersion;
i=G.language;
v=G.country;
o=v+"_"+i;
y=G.isAuthorMode;
pagePathSection=G.sectionPath;
k=G.readmoreLinkLabel;
z=G.loadmorecount;
A=G.initialcount;
C=G.sectionPath;
s=G.downloadImageLabel;
p=G.loadMoreImagesLabel
}$(j).text(p);
$(j).prepend('<i class="icon-double-angle-right"></i>');
setTimeout(function(){document.getElementById("year").addEventListener("change",H,false);
document.getElementById("month").addEventListener("change",H,false);
function H(){if(typeof(Storage)!=="undefined"){w=localStorage.getItem("dateSelcted")
}if(w){E="(and (or site:'"+o+"' (phrase field=override_video_info'"+o+"')) ( range field=cq_last_published_date  {,'"+w+"']) content_type:'image' is_downloadable:'true')"
}else{E="(and (or site:'"+o+"' (phrase field=override_video_info'"+o+"')) content_type:'image' is_downloadable:'true')"
}B={query:o,queryParser:"structured",filterQuery:E,start:r,size:A,sort:"cq_last_published_date desc"};
B["return"]="vanity_url,path,override_video_info,resize_image_url,formatted_publish_date,author,alt,content_type,dc_title,dc_description";
n=true;
q(B)
}},500);
setTimeout(function(){w=localStorage.getItem("dateSelcted");
if(w){E="(and (or site:'"+o+"' (phrase field=override_video_info'"+o+"')) ( range field=cq_last_published_date  {,'"+w+"']) content_type:'image' is_downloadable:'true')"
}else{E="(and (or site:'"+o+"' (phrase field=override_video_info'"+o+"')) content_type:'image' is_downloadable:'true')"
}B={query:o,queryParser:"structured",filterQuery:E,start:r,size:A,sort:"cq_last_published_date desc"};
B["return"]="vanity_url,path,override_video_info,resize_image_url,formatted_publish_date,author,alt,content_type,dc_title,dc_description";
AWS.config.region=G.awsRegion;
csd=new AWS.CloudSearchDomain({endpoint:F,apiVersion:h,convertResponseTypes:false});
q(B)
},900)
});
$(".cloud-image-grid").find("#load-more-button").click(function(){n=false;
x()
});
function f(I,G,J){var H;
if(G&&G.indexOf(".html")==-1){H=G+".html"
}else{H=G
}return H
}function t(I){var G='<span class="theme-secondary">';
var H="</span>";
I=I.replace("{",G);
I=I.replace("}",H);
return I
}function x(){r=parseInt(r,10)+parseInt(A,10);
B.start=r;
B.size=z;
q(B)
}function q(H){var G;
csd.search(H,function(I,J){if(I){}else{G=J.hits.hit;
index=0;
if(n){$(".post-container-image article").remove()
}if(G.length>0){$.each(G,function(T){var R=G[T].fields,V=R.vanity_url,L=R.path;
index++;
if(R.tags_and_topics_details){tags=JSON.parse(R.tags_and_topics_details)
}var N="";
if(R.long_title){N=R.long_title
}else{if(R.dc_title){try{N=R.dc_title[0]
}catch(Q){}}}N=t(N);
var U=f(y,V,L);
var P="";
try{P=R.dc_description[0];
P=t(P)
}catch(Q){}var K=$("#cloud-library-image-grid-template").html();
var S=Handlebars.compile(K);
var M={index:index,titleVal:N,resolvePathUrl:U,alt:R.alt,resize_image_url:R.resize_image_url,downloadImageLabel:s,desc:P};
var O=S(M);
$(".post-container-image").append(O)
});
a.util.truncate_text(".post-container-image .titles_updated",2,true,{lineHeight:25});
a.util.truncate_text(".post-container-image .descriptions_updated",3,true,{lineHeight:25})
}}})
}})
});
tccc.initComponent("#filterSearch",["aws-sdk-2.187.0.min","moment"],function(c,a,b){c.each(function(){var B=[],y=false,M,v,K,u=false,q=false,d=true,G,x=false,k=[],l="",t=0,m,g,F,C,p,D,L,h,w,J,e,j,f,o,n,E,I,A,H,r=[],s,z=0,i;
$(document).ready(function(){console.log("search filter document ready begin");
var P=$("#filterSearch").attr("data-filter-json");
if(P){P=JSON.parse(P);
m=P.defaultYear;
g=P.defaultMonth;
F=P.displayStartingFrom;
C=P.displayTopicTagFilter;
p=P.filterButtonLabel;
D=P.dateFilterLabel;
L=P.topicTagFilterButtonLabel;
h=P.topicTagFilterLabel;
w=P.selectTopicTagFilterLabel;
J=P.componentFilterTitle;
e=P.doNotIncludeTopics;
j=P.doNotIncludeTags;
f=P.defaultTopics;
o=P.defaultTags;
n=P.selectedTopics;
E=P.selectedTags;
_lang=P.language;
_country=P.country;
s=_country+"_"+_lang;
I=false;
A=false
}if(!J&&!F&&!C){$("#filterWrapper").hide()
}function O(){var T,S;
if(!x){M=g;
v=m
}if(v&&M){G=v+"-"+M+"-"+new Date().getDate()+new Date().toISOString().substring(10)
}if(M&&!v){T=new Date().getFullYear();
G=T+"-"+M+"-"+new Date().getDate()+new Date().toISOString().substring(10)
}if(!M&&v){S=new Date().getMonth();
S=(parseInt(S,10)+1).tcccPad(2);
G=v+"-"+S+"-"+new Date().getDate()+new Date().toISOString().substring(10)
}if(!M&&!v){T=new Date().getFullYear();
S=new Date().getMonth();
S=(parseInt(S,10)+1).tcccPad(2);
G=T+"-"+S+"-"+new Date().getDate()+new Date().toISOString().substring(10)
}if(typeof(Storage)!=="undefined"){previousDateSelected=localStorage.getItem("dateSelcted");
console.log("search filter previous date selected",previousDateSelected);
localStorage.setItem("dateSelcted",G);
console.log("dateStr: ",G)
}}if(g&&g.toUpperCase()==="CURRENT"){g=new Date().getMonth();
g=parseInt(g,10)+1
}$("#month").val(g);
if(m&&m.toUpperCase()==="CURRENT"){m=new Date().getFullYear()
}$("#year").val(m);
if(e&&j){$("#bottomFilter").hide()
}M=g;
v=m;
if(n&&n.length>0){u=true
}if(E&&E.length>0){q=true
}if(f&&f.length>0){I=true
}if(o&&o.length>0){A=true
}ajaxUrl="/bin/journey/getTagTopicCacheDataCloudFilter.json";
K={locale:s};
if(e){K={locale:s,filterType:"Tag"}
}if(j){K={locale:s,filterType:"Topic"}
}if(q&&!u){ajaxUrl="/bin/journey/getTagTopicCacheDataCloudFilter.overrideTags.json";
K.overrideTags=E.join()
}if(u&&!q){ajaxUrl="/bin/journey/getTagTopicCacheDataCloudFilter.overrideTopics.json";
K.overrideTopics=n.join()
}if(u||q){ajaxUrl="/bin/journey/getTagTopicCacheDataCloudFilter.overrideTopics.overrideTags.json";
K.overrideTopics=n.join();
K.overrideTags=E.join()
}$.ajax({url:ajaxUrl,type:"GET",data:K,dataType:"json",success:function(W,X,U){r=W;
function T(Z,Y){if(!Y){Y=window.location.href
}Z=Z.replace(/[\[\]]/g,"\\$&");
var ab=new RegExp("[?&]"+Z+"(=([^&#]*)|&|#|$)"),aa=ab.exec(Y);
if(!aa){return null
}if(!aa[2]){return""
}return decodeURIComponent(aa[2].replace(/\+/g," "))
}var S=T("tagstopics");
if(S){var V=S.split(",");
V.forEach(function(Y){var aa=r.length;
while(aa--){if(Y==r[aa].tagTitle){var Z={tagTopicName:r[aa].tagTitle,color:r[aa].color,path:r[aa].pagPath};
B.push(Z);
break
}}});
Q()
}$.each(W,function(Y,aa){var Z=aa.pagPath+","+aa.color;
$("#selectTopic").append($("<option>").text(aa.tagTitle).attr("value",Z))
})
},error:function(S,U,T){}});
$("#filterTitle").text(J);
$("#filterToggle #filterToggleButton").text(p);
$("#dateFilterTitle").text(D);
$("#addFilterLabel").text(L);
$("#filterByLable").text(h);
$("#selectTopic").append($("<option>",{value:0,text:w}));
if(!(F)){g=new Date().getMonth();
g=parseInt(g,10)+1;
m=new Date().getFullYear();
$("#dateFilterWrapper").hide()
}else{$("#dateFilterWrapper").show()
}if(!(F)){$("#dateFilterWrapper").hide()
}else{$("#dateFilterWrapper").show()
}if((!(C))||(e&&j)){$("#bottomFilter").hide()
}else{$("#bottomFilter").show()
}$("#toggleFilterContainer").click(function(){$(this).hide();
$("#selectTopic").show()
});
$("#month").on("change",function(){y=true;
x=true;
M=$("#month option:selected").val()
});
$("#year").on("change",function(){y=true;
x=true;
v=$("#year option:selected").val()
});
$("#filterToggleButton").on("click",function(S){$("#bottomFilter").slideToggle("slow");
$(this).toggleClass("buttonExpanded")
});
$("body").on("click",".removeItemLink",function(S){S.preventDefault();
var T=$(this).prev().text();
B=$.grep(B,function(V,U){return V.tagTopicName==T
},true);
$(this).closest("li").fadeOut("normal",function(){$(this).remove()
});
R("tagsTopics")
});
$("#selectTopic").change(function(){console.log("select topic event from search");
var T=$("#selectTopic option:selected").text();
var S=$(this).val();
N(T,S)
});
function N(S,U){var T=U.split(",");
B.push({tagTopicName:S,color:T[1],path:T[0]});
R("tagsTopics");
Q()
}function R(S){if(!String.prototype.contains){String.prototype.contains=function(V){return this.indexOf(V)>-1
}
}if(S=="tagsTopics"){var T=_.pluck(B,"tagTopicName").join(",");
var U;
U=window.location.href.split("?")[0];
U=U+"?tagstopics="+T;
history.pushState({},null,U)
}}function Q(){$(".selectedTags").remove();
if(B&&B.length>0){var T="";
var S=B;
T=T+'<div class="tags selectedTags"><ul class="topicListWrapper">';
S.forEach(function(U){T=T+'<li style="color:'+U.color+';border:1px solid;background:#FFFFFF"><a class="selectedItem" href="'+U.path+'" style="color:'+U.color+';background:#FFFFFF">'+U.tagTopicName+'</a><a href="" class="removeItemLink"><span>&nbsp;</span><i class="fa fa-times-circle" aria-hidden="true"></i></a></li>'
});
T=T+"</ul></div>";
$("#addFilterWrapper").before(T)
}$("#selectTopic").val(0)
}console.log("end of ready on filter search")
})
})
});
$(document).ready(function(){var a=($("html").attr("lang")).toLowerCase();
var k="zh-cn";
if(a===k){var c=$(window).width();
var i=$(window).height();
var b=false;
var e=0;
var d=$("ol#breadcrumb li").length;
var h=0;
var g=false;
if(c<500){g=true
}if(c<890){if((g)&&(d>3)){b=true
}$("ol#breadcrumb li").each(function(l,m){if(b&&(l<(d-3))){$("ol#breadcrumb li").eq(l).css("display","none");
$("ol#breadcrumb li").eq(l).next().hide()
}else{var n=$("ol#breadcrumb li").eq(l).width();
e=e+n;
if(l==(d-1)){h=e-n
}}});
var j;
if(g){j=250
}else{j=720
}var f=j-h;
$("ol#breadcrumb li").each(function(l,m){if((l==($("ol#breadcrumb li").length-1))&&(e>j)){$("ol#breadcrumb li").eq(l).css("width",f)
}})
}}});
tccc.initComponent(".brand-product-description-list",[],function(b,a){b.each(function(){var f=$(this),d=f.find("h1"),e=f.find("h2");
function c(){a.util.truncate_text(d,1);
a.util.truncate_text(e,1)
}$(a.global).bind(a.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){c()
});
c()
})
});
tccc.initComponent("#brands-container",[],function(b,a){b.each(function(){var k=$(this),f,j=k.find(".brands-col"),p=$("body").attr("data-author-mode"),g,o,l,c,i="long,short",d,n=$(".brand-list-with-logo").attr("data-brands-root-path");
$(document).ready(function(){e()
});
function h(v){var w,x,y,u,r,t,s,q=0;
t=m();
if(!v||!v.length){return
}s=$("<ul class='items'>").appendTo(j);
for(w=0;
w<v.length;
w++){o=v[w]["title"+t];
c=v[w].altText;
l=v[w].url;
d=v[w]["imgSrc"+t];
y='<img class="logoImg" data-src="" src="'+d+'" alt="'+o+'"/>';
u='<span itemprop="name" data-title="'+i+'">'+o+"</span>";
r='<a href="'+l+'"> '+y+" "+u+" </a>";
x='<li class="item"> '+r+" </li>";
s.append(x)
}}function e(){var q="/bin/journey/brandlist?forPath="+n;
$.ajax({type:"GET",url:q,dataType:"json"}).done(function(s,t,r){console.log("response china",s);
f=s;
h(f)
}).fail(function(r,s){console.log("error",s)
})
}function m(){if($("html").hasClass("tablet")){return"Tablet"
}else{if($("html").hasClass("mobile")){return"Mobile"
}else{return"Desktop"
}}}})
});
tccc.initComponent(".m-f-brand-launcher",[],function(b,a){b.each(function(){var d=$(this),c=d.find(".brand-grid");
$showGrid=d.find(".brands-container"),$iconShowHide=d.find(".icon-chevron-sign-down");
$showGrid.on("click",".brands-toggle",function(f){f.preventDefault();
$(this).toggleClass("closed");
$iconShowHide.toggleClass("icon-chevron-sign-down icon-chevron-sign-up");
c.slideToggle("slow")
})
})
});
if(window.tccc!==undefined){tccc.initComponent(".m-profile .details",[],function(a){setTimeout(function(){a.addClass("transition-in")
},600)
})
};