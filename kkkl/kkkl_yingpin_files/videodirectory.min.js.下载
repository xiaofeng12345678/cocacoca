$(document).on("tccc:slow",function(){tccc.initComponent(".video-directory",["jqUI","selectBoxIt","listContentLoader","videoDirectoryObject","videoDirectoryCollection"],function(f,b,e,a,d,g,c){f.each(function(){var j=$(this),E=j.find(".video-navigation"),q=E.find("ul.list li"),h=E.find("ul.tabs li"),x=E.find("ul.tabs li.selected"),w=$("#mobile_collapse"),n=j.find("#load-more-button"),D=$(".search-result-item-template"),u=$(".video-search-results-list"),m=$(".video-sorter"),v=$(".language-picker"),C=$(".total-video-count-number"),p=$(".video-search-message"),s=$(this).attr("data-load-more-url"),r=$(this).attr("data-offset"),t=$("html"),z="/12/"+m.val()+"/"+v.val()+"/"+r+".json",l=new d(s+z),o=j.find(".heroCarousel-inner .summary");
if($(this).attr("data-search-key")!==undefined&&$(this).attr("data-search-key")!==""){if($(this).attr("data-chanel-name")!==undefined&&$(this).attr("data-chanel-name")!==""){l.params({search_key:$(this).attr("data-search-key"),chanel_name:$(this).attr("data-chanel-name")})
}else{l.params({search_key:$(this).attr("data-search-key")})
}}u.find(".views").each(function(){$(this).text(window.Globalize.format(parseInt($.trim($(this).text())),"n0"))
});
if(t.hasClass("mobile")){b.util.truncate_text(".heading-xlarge span",1)
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(F,G){if(G.current_size===b.global.sizes.MOBILE){b.util.truncate_text(".heading-xlarge span",1)
}});
if($(".heroCarousel-inner").find(".item").length>1){if(!window.heroCarousel){$(".heroCarousel-inner").royalSlider({keyboardNavEnabled:false,arrowsNav:false,autoHeight:false,imageScaleMode:"none",imageAlignCenter:false,numImagesToPreload:1,fadeinLoadedSlide:false,slidesSpacing:0,loop:false,controlsInside:false,globalCaption:false,block:{fadeEffect:true,moveEffect:"none"}});
window.heroCarousel=$(".heroCarousel-inner").data("royalSlider")
}}E.tabs({collapsible:false,active:h.index(x),activate:function(F,G){F.preventDefault();
$(this).find("ul.tabs li").removeClass("selected").eq(G.newTab.index()).addClass("selected")
}});
function A(G,F){if(!F){$.each(G,function(I,J){if($(J).attr("data-item-index")>1){$(J).hide().end()
}else{$(J).show().end()
}});
if($(G).parent().find(".selected")){var H=$(G).parent().find(".selected");
H.show().siblings().hide().end()
}w.addClass("collapsed").removeClass("not-collapsed")
}else{$.each(G,function(I,J){$(J).show().end()
});
w.addClass("not-collapsed").removeClass("collapsed")
}}$("select",".filter-options").selectBoxIt(b.global.selectBoxItOptions).data("selectBoxIt");
$(document).click(function(){$(".selectboxit").removeClass("selectboxit-open");
$(".selectboxit-options").hide()
});
$(document).on("click",".selectboxit-container",function(F){F.stopPropagation()
});
if(b.global.sizes.current_size===b.global.sizes.MOBILE){if(!p.length){A(q,false)
}}else{A(q,true)
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(b.global.sizes.current_size===b.global.sizes.MOBILE){if(!p.length){A(q,false)
}}else{A(q,true)
}});
w.on("click",function(){A(q,$(this).hasClass("collapsed"))
});
function y(F,G){if(b.global.is_big_desktop_size(F)||b.global.is_desktop_size(F)){b.util.truncate_text(o,9,G);
b.util.truncate_text(".video-search-results-list .search-result .summary",3,G)
}else{if(b.global.is_tablet_size(F)){b.util.truncate_text(".video-search-results-list .search-result .summary",3,G)
}}}function k(G,F){var H;
if(F){u.empty()
}$.each(G,function(I,J){H=D.clone();
H.removeClass("hidden");
H.find(".poster").attr("src",J.medium_poster_url);
H.find(".poster-link").attr("href",J.url);
H.find(".title").html(J.title);
H.find(".views").html(window.Globalize.format(J.total_views,"n0"));
H.find(".summary").html(J.summary);
H.find(".watch-now").attr("href",J.url);
u.append(H)
});
y(b.global.sizes.current_size)
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(F,G){var H=true;
if(b.global.is_mobile_size(G.previous_size)){H=false
}y(b.global.sizes.current_size,H)
});
y(b.global.sizes.current_size);
function B(H){var G=[],F=n.parent();
l.get().success(function(I){if(H){C.html(window.Globalize.format(+I.total_video_count,"n0"))
}$.each(I.video_objects,function(J,K){try{G.push(new g({initial_data:K}))
}catch(L){console.log(L)
}});
if(!I.loadMore){F.hide()
}else{F.show()
}k(new c(G).all(),H);
z="/12/"+m.val()+"/"+v.val()+"/"+I.offset+".json";
l.url(s+z)
}).error(function(I){console.log(I)
})
}n.click(function(){B(false)
});
m.on("change",function(){z="/12/"+m.val()+"/"+v.val()+"/0.json";
l.url(s+z);
B(true)
});
v.on("change",function(){z="/12/"+m.val()+"/"+v.val()+"/0.json";
l.url(s+z);
B(true)
})
})
})
});
$(document).on("tccc:slow",function(){tccc.initComponent(".video-directoryCloud",["jqUI","selectBoxIt","listContentLoader","videoDirectoryObject","videoDirectoryCollection"],function(f,b,e,a,d,g,c){f.each(function(){var j=$(this),E=j.find(".video-navigation"),q=E.find("ul.list li"),h=E.find("ul.tabs li"),x=E.find("ul.tabs li.selected"),w=$("#mobile_collapse"),n=j.find("#load-more-button"),D=$(".search-result-item-template"),u=$(".video-search-results-list"),m=$(".video-sorter"),v=$(".language-picker"),C=$(".total-video-count-number"),p=$(".video-search-message"),s=$(this).attr("data-load-more-url"),r=$(this).attr("data-offset"),t=$("html"),z="/12/"+m.val()+"/"+v.val()+"/"+r+".json",l=new d(s+z),o=j.find(".heroCarousel-inner .summary");
if($(this).attr("data-search-key")!==undefined&&$(this).attr("data-search-key")!==""){if($(this).attr("data-chanel-name")!==undefined&&$(this).attr("data-chanel-name")!==""){l.params({search_key:$(this).attr("data-search-key"),chanel_name:$(this).attr("data-chanel-name")})
}else{l.params({search_key:$(this).attr("data-search-key")})
}}u.find(".views").each(function(){$(this).text(window.Globalize.format(parseInt($.trim($(this).text())),"n0"))
});
if(t.hasClass("mobile")){b.util.truncate_text(".heading-xlarge span",1)
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(F,G){if(G.current_size===b.global.sizes.MOBILE){b.util.truncate_text(".heading-xlarge span",1)
}});
if($(".heroCarousel-inner").find(".item").length>1){if(!window.heroCarousel){$(".heroCarousel-inner").royalSlider({keyboardNavEnabled:false,arrowsNav:false,autoHeight:false,imageScaleMode:"none",imageAlignCenter:false,numImagesToPreload:1,fadeinLoadedSlide:false,slidesSpacing:0,loop:false,controlsInside:false,globalCaption:false,block:{fadeEffect:true,moveEffect:"none"}});
window.heroCarousel=$(".heroCarousel-inner").data("royalSlider")
}}E.tabs({collapsible:false,active:0,activate:function(F,G){F.preventDefault();
$(this).find("ul.tabs li").removeClass("selected").eq(G.newTab.index()).addClass("selected")
}});
function A(G,F){if(!F){$.each(G,function(I,J){if($(J).attr("data-item-index")>1){$(J).hide().end()
}else{$(J).show().end()
}});
if($(G).parent().find(".selected")){var H=$(G).parent().find(".selected");
H.show().siblings().hide().end()
}w.addClass("collapsed").removeClass("not-collapsed")
}else{$.each(G,function(I,J){$(J).show().end()
});
w.addClass("not-collapsed").removeClass("collapsed")
}}$("select",".filter-options").selectBoxIt(b.global.selectBoxItOptions).data("selectBoxIt");
$(document).click(function(){$(".selectboxit").removeClass("selectboxit-open");
$(".selectboxit-options").hide()
});
$(document).on("click",".selectboxit-container",function(F){F.stopPropagation()
});
if(b.global.sizes.current_size===b.global.sizes.MOBILE){if(!p.length){A(q,false)
}}else{A(q,true)
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(){if(b.global.sizes.current_size===b.global.sizes.MOBILE){if(!p.length){A(q,false)
}}else{A(q,true)
}});
w.on("click",function(){A(q,$(this).hasClass("collapsed"))
});
function y(F,G){if(b.global.is_big_desktop_size(F)||b.global.is_desktop_size(F)){b.util.truncate_text(o,9,G);
b.util.truncate_text(".video-search-results-list .search-result .summary",3,G)
}else{if(b.global.is_tablet_size(F)){b.util.truncate_text(".video-search-results-list .search-result .summary",3,G)
}}}function k(G,F){var H;
if(F){u.empty()
}$.each(G,function(I,J){H=D.clone();
H.removeClass("hidden");
H.find(".poster").attr("src",J.medium_poster_url);
H.find(".poster-link").attr("href",J.url);
H.find(".title").html(J.title);
H.find(".views").html(window.Globalize.format(J.total_views,"n0"));
H.find(".summary").html(J.summary);
H.find(".watch-now").attr("href",J.url);
u.append(H)
});
y(b.global.sizes.current_size)
}$(b.global).bind(b.global.events.ON_CROSS_RESIZE_BREAKPOINT,function(F,G){var H=true;
if(b.global.is_mobile_size(G.previous_size)){H=false
}y(b.global.sizes.current_size,H)
});
y(b.global.sizes.current_size);
function B(H){var G=[],F=n.parent();
l.get().success(function(I){if(H){C.html(window.Globalize.format(+I.total_video_count,"n0"))
}$.each(I.video_objects,function(J,K){try{G.push(new g({initial_data:K}))
}catch(L){console.log(L)
}});
if(!I.loadMore){F.hide()
}else{F.show()
}k(new c(G).all(),H);
z="/12/"+m.val()+"/"+v.val()+"/"+I.offset+".json";
l.url(s+z)
}).error(function(I){console.log(I)
})
}})
})
});
$(document).on("tccc:slow",function(){tccc.initComponent(".video-directoryCloud",["aws-sdk-2.187.0.min","moment"],function(c,a,b){c.each(function(){var M=$(this),O=$(" .video-directoryCloud #video-search-results"),l,n,L,l,P,x,C,g,q,I,E,u,r,R="",B,f,H,x,K,d,p,k,y,h=12,o=$(".video-sorter"),w=$(".language-picker"),G=$(".total-video-count-number"),m=$("#breadcrumb .shorten-breadcrumb"),N=M.find("#load-more-button");
var e={query:"nt:video",start:0,size:h,queryParser:"structured",sort:"cq_last_published_date desc"};
e["return"]="vanity_paths,override_video_info,long_title,resize_image_url,jcr_description,search_rank";
$(document).ready(function(){$("#video-search-nomatch-label").hide();
$(".heroCarousel-inner").hide();
l=M.data("cloudsearchbean");
l=l.replace(/'/g,'"');
l=JSON.parse(l);
P=l.endPoint;
g=l.awsVersion;
H=l.isAuthorMode;
x=l.language.toUpperCase();
d=l.country.toUpperCase();
k=l.videoSearchResultsFoundLabel;
C=d+"_"+x;
if(d&&x){K=d.toLowerCase()+"/"+x.toLowerCase()
}if(!$("#video-topics li").length){$(".video-directoryCloud ul.tabs .item.left").hide();
M.find(".mobile-collapse").remove()
}if(!$("#video-brands li").length){$(".video-directoryCloud ul.tabs .item.right").hide();
$("#video-topics").show()
}AWS.config.region=l.awsRegion;
csd=new AWS.CloudSearchDomain({endpoint:P,apiVersion:g,convertResponseTypes:false});
AWS.config.region=l.awsRegion;
e.filterQuery="(and is_black_listed:'false' (and (or site:'"+C+"' (phrase field=override_video_info'"+C+"')) content_type:'video' ))";
e.start=0;
A(e);
if(!$("#video-topics li").length){$(".video-directoryCloud ul.tabs .item.left").hide()
}if(!$("#video-brands li").length){$(".video-directoryCloud ul.tabs .item.right").hide()
}$(".video-directoryCloud ul.tabs .item.left").addClass("selected");
$(".video-directoryCloud .video-topics li.item a").prop("href","#");
$(".video-directoryCloud .video-brands li.item a").prop("href","#");
$(".video-directoryCloud .search .button").on("click",function(S){S.preventDefault();
y=$(".video-directoryCloud .search input").val();
f=true;
e=s(e);
v(y)
});
$(".search input").keydown(function(S){if(S.keyCode==13){S.preventDefault();
p=$(this).val();
$("input.search-query-field").val(p);
v(p)
}});
o.on("change",function(){var S=o.val();
if(S=="recency"){e.sort="cq_last_published_date desc"
}if(S=="popularity"){e.sort="search_rank desc"
}f=true;
e=s(e);
A(e)
});
w.on("change",function(){var S=w.val();
j(S)
});
$(" .video-directoryCloud ul.list li.item").on("click",function(U){U.preventDefault();
$(".video-directoryCloud ul.list .item.selected").removeClass("selected");
$(this).addClass("selected");
y=$(this).find("span").text();
q=$(this).attr("data-featured-video");
I=$(this).attr("data-videooverride-title");
E=$(this).attr("data-videooverride-desc");
r=$(this).data("iscustomtitle");
B=$(this).attr("data-topic-keywords");
m.text(y);
R="";
if(B){var T=B.split(",");
if(r===true&&T.length>1){R="(and "
}if(r===false&&T.length>1){R='(and "'+y+'" '
}for(var S=0;
S<T.length;
S++){R=R+'"'+T[S]+'" '
}R=R+")"
}if(q){u=true;
J(q)
}else{$(".heroCarousel-inner").hide();
if(R&&R.length>0){v(R)
}else{v(y)
}}});
N.click(function(){f=false;
z()
})
});
function s(S){S.start=0;
return S
}function Q(S){return S.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")
}function v(S){e.query=S;
e.filterQuery="(and is_black_listed:'false' (and (or site:'"+C+"' (phrase field=override_video_info'"+C+"')) content_type:'video'))";
if(e.query.length!==0){f=true;
e=s(e);
A(e)
}}function J(T){var S="(and is_black_listed:'false' (and (or site:'"+C+"' (phrase field=override_video_info'"+C+"')) content_type:'video'))";
if(e.query.length!==0){f=true;
e=s(e);
S=S.slice(0,-1);
S=S+" (or post_id:'"+T+"' video_id:'"+T+"'))";
e.filterQuery=S;
e.query=T;
A(e)
}}function j(T){var S=e.filterQuery;
if(T=="all"){S="(and is_black_listed:'false' (and (or site:'"+C+"' (phrase field=override_video_info'"+C+"')) content_type:'video'))"
}else{S=S.slice(0,-1);
S=S+" owner:'"+C+"')"
}e.filterQuery=S;
if(e.query.length!==0){f=true;
e=s(e);
A(e)
}}function z(){e.start=e.start+h;
A(e)
}function F(U){u=false;
if(U.hit&&U.hit.length){var T=U.hit[0].fields,X=T.vanity_paths,W=T.override_video_info,S,V,Y={desktop:T.long_title,tablet:T.long_title,mobile:T.long_title};
if(W){W=W.replace(/'/g,"&#039;");
W=JSON.parse(W)
}if(W&&W.coverImage&&(overrideVideoInfoObject.coverImage.trim()).length!==0){S=W.coverImage
}else{S=T.resize_image_url
}if(W&&W.title){V=W.title
}else{V=T.long_title
}if(X){for(i=0;
i<X.length;
i++){if(X[i].indexOf(K)>-1){if(H==false){X[i].indexOf(x.toLowerCase());
L=X[i].substring((X[i].indexOf(K)+5));
break
}else{L=X[i];
break
}}}}$(".heroCarousel-inner").show();
$(".heroCarousel-inner .item a").attr("href",L);
$(".heroCarousel-inner .item a img").attr("src",S);
$(".heroCarousel-inner .item a img").attr("alt",V);
$(".heroCarousel-inner .item a img").attr("title",V);
$(".heroCarousel-inner .caption span").data("title",Y);
if(I){$(".heroCarousel-inner .caption span").text(I)
}else{$(".heroCarousel-inner .caption span").text(T.long_title)
}if(E){$(".heroCarousel-inner .summary").text(E)
}else{$(".heroCarousel-inner .summary").text(T.jcr_description)
}}else{$(".heroCarousel-inner").hide()
}if(r===true){if(B){v(R)
}}else{if(B){v(R)
}else{v(y)
}}}function t(U){var V=-1,T=U.hit;
$("#video-search-nomatch-label").hide();
if(f){O.empty()
}if(T.length==0){G.text(Q(U.found))
}if(U.found<12){$("#load-more-button").hide()
}else{$("#load-more-button").show()
}if(T.length>0){G.text(Q(U.found));
G.next().text(y);
if(y){var S=' "'+y+'"';
$(".video-stats").show();
$("#video-search-matched-label").text(k);
$("#video-search-matched-label").append("<span class='query'>"+S+"</span>");
$("#video-search-matched-label").show()
}else{$("#video-search-matched-label").hide()
}O.append("<ul id='video-search-results-list' class='search-results video-search-results-list'>");
$.each(T,function(W){var Y=T[W].fields,ab="search-result-item-template"+W,ac=Y.vanity_paths,ae=Y.search_rank,ad=Y.override_video_info,aa,X;
if(ad){ad=ad.replace(/'/g,"&#039;");
ad=JSON.parse(ad)
}if(d&&x){aa=d.toLowerCase()+"/"+x.toLowerCase()
}if(ad&&ad.coverImage&&(ad.coverImage.trim()).length!==0){X=ad.coverImage
}else{if(Y.resize_image_url){X=Y.resize_image_url
}else{X=""
}}if(ac){for(i=0;
i<ac.length;
i++){if(ac[i].indexOf(aa)>-1){if(H==false){ac[i].indexOf(x.toLowerCase());
n=ac[i].substring((ac[i].indexOf(aa)+5));
break
}else{n=ac[i];
break
}}}}else{n="undefined"
}var Z="";
if(ad&&ad.title){Z=ad.title
}else{if(Y.long_title){Z=Y.long_title
}}var af="";
if(ad&&ad.description){af=ad.description
}else{if(Y.jcr_description){af=Y.jcr_description
}}$("#video-search-results-list").append("<li class='search-result' id='"+ab+"'><div><a class='poster-link' href ='"+n+"'><img  alt='"+Z+"' title='"+Z+"' class='bordered poster' src='"+X+"'  ><div class='poster-overlay'> <div class='center-vertically'> <i class='icon-play theme-link knockout-bgcolor'></i> </div></div></a><div class='title ellipsis'><span itemprop='name' data-override-size=''>"+Z+"</span></div><div class='view-count-wrapper'><span class='views'> "+Q(ae)+"</span> <span>"+l.viewsLabel+"</span></div><div class='summary trunk8'>"+af+"</div><a href='"+n+"' class='watch-now'> <i class='icon-double-angle-right'></i> "+l.watchNowLabel+"</a></div></li>")
})
}else{if(T==0){$("#video-search-nomatch-label .query").text(y);
$("#video-search-nomatch-label").show();
$("#load-more-button").hide();
$(".heroCarousel-inner").hide();
$(".video-stats").hide()
}}}function D(S){return decodeURIComponent(S)
}function A(S){var T;
a.util.AWSSearch(e,AWS,U);
function U(V){if(u){F(V.hits)
}else{t(V.hits)
}}}})
})
});